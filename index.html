<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Work Hours & Earnings Tracker</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    table, th, td {
      border: 1px solid black;
      border-collapse: collapse;
    }
    th, td {
      padding: 8px;
    }
    .week-group {
      margin-bottom: 40px;
    }
  </style>
</head>
<body>
  <h1>Work Hours & Earnings Tracker</h1>

  <label>Hourly Rate: <input type="number" id="hourlyRate" step="0.01" /></label>
  <br /><br />

  <table id="workTable">
    <thead>
      <tr>
        <th>Date</th>
        <th>Hours Worked</th>
        <th>Break (hrs)</th>
        <th>Notes</th>
        <th>Co-worker</th>
      </tr>
    </thead>
    <tbody id="workBody">
      <tr>
        <td><input type="date" /></td>
        <td><input type="number" step="0.01" class="hours" /></td>
        <td><input type="number" step="0.01" class="breaks" /></td>
        <td><input type="text" class="notes" /></td>
        <td><input type="text" class="coworker" /></td>
      </tr>
    </tbody>
  </table>
  <br />
  <button onclick="addRow()">Add Row</button>
  <button onclick="calculate()">Calculate</button>

  <div id="results"></div>

  <script>
    function addRow() {
      const row = document.createElement("tr");
      row.innerHTML = `
        <td><input type="date" /></td>
        <td><input type="number" step="0.01" class="hours" /></td>
        <td><input type="number" step="0.01" class="breaks" /></td>
        <td><input type="text" class="notes" /></td>
        <td><input type="text" class="coworker" /></td>
      `;
      document.getElementById("workBody").appendChild(row);
    }

    function calculate() {
      const hourlyRate = parseFloat(document.getElementById("hourlyRate").value);
      const rows = document.querySelectorAll("#workBody tr");

      let records = [];

      rows.forEach(row => {
        const date = new Date(row.cells[0].querySelector("input").value);
        const hours = parseFloat(row.cells[1].querySelector("input").value) || 0;
        const breaks = parseFloat(row.cells[2].querySelector("input").value) || 0;
        const netHours = Math.max(hours - breaks, 0);

        if (!isNaN(date.getTime())) {
          records.push({ date, netHours });
        }
      });

      records.sort((a, b) => a.date - b.date);

      const results = document.getElementById("results");
      results.innerHTML = "<h2>Results</h2>";

      let totalHours = 0;
      let totalPay = 0;
      let overtimePay = 0;

      for (let i = 0; i < records.length; i += 14) {
        let group = records.slice(i, i + 14);
        let groupHours = 0;
        let groupHTML = `<div class="week-group"><table><tr><th>Date</th><th>Hours</th><th>Pay</th><th>Overtime Pay</th></tr>`;

        group.forEach(({ date, netHours }) => {
          let regular = Math.min(netHours, 8);
          let overtime = Math.max(netHours - 8, 0);
          let dailyPay = regular * hourlyRate;
          let dailyOTPay = overtime * hourlyRate * 1.5;

          groupHTML += `<tr>
            <td>${date.toLocaleDateString()}</td>
            <td>${netHours.toFixed(2)}</td>
            <td>$${dailyPay.toFixed(2)}</td>
            <td>$${dailyOTPay.toFixed(2)}</td>
          </tr>`;

          groupHours += netHours;
          totalHours += netHours;
          totalPay += dailyPay;
          overtimePay += dailyOTPay;
        });

        groupHTML += `</table></div>`;
        results.innerHTML += groupHTML;
      }

      results.innerHTML += `<p><strong>Total Hours Worked:</strong> ${totalHours.toFixed(2)}</p>`;
      results.innerHTML += `<p><strong>Total Regular Pay:</strong> $${totalPay.toFixed(2)}</p>`;
      results.innerHTML += `<p><strong>Total Overtime Pay:</strong> $${overtimePay.toFixed(2)}</p>`;
      results.innerHTML += `<p><strong>Total Earnings:</strong> $${(totalPay + overtimePay).toFixed(2)}</p>`;
    }
  </script>
</body>
</html>
