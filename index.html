<script>
  // pull in our days array from the form script
  // (if you’d rather define it here, move this const up)
  const dayNames = ["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];

  let allWeeks = JSON.parse(localStorage.getItem('workLog')||'[]');
  let editIndex = -1;

  function saveWeek(){
    // grab every field explicitly
    const rangeEl   = document.getElementById('weekRange');
    const rateEl    = document.getElementById('hourlyRate');
    const breaksEl  = document.getElementById('breaks');

    const range = rangeEl.value.trim();
    const rate  = parseFloat(rateEl.value);
    const br    = parseFloat(breaksEl.value) || 0;

    if (!range || isNaN(rate)) {
      return alert("Please fill in both the date range and a valid hourly rate.");
    }

    // collect day-by-day entries
    let total = 0,
        daily = [];

    dayNames.forEach(d => {
      const hrsEl = document.getElementById(`${d}_hrs`);
      const cowEl = document.getElementById(`${d}_cow`);
      const noteEl= document.getElementById(`${d}_note`);

      const h = parseFloat(hrsEl.value) || 0;
      const c = cowEl.value.trim();
      const n = noteEl.value.trim();

      total += h;
      daily.push({ h, c, n });
    });

    const worked = Math.max(0, total - br);
    const reg    = Math.min(40, worked),
          ot     = Math.max(0, worked - 40),
          regPay = reg * rate,
          otPay  = ot  * rate * 1.5,
          totPay = regPay + otPay;

    const entry = { range, rate, br, daily, worked, reg, ot, regPay, otPay, totPay };

    if (editIndex >= 0) {
      allWeeks[editIndex] = entry;
    } else {
      allWeeks.push(entry);
    }

    localStorage.setItem('workLog', JSON.stringify(allWeeks));

    // reset form and re-render
    editIndex = -1;
    document.getElementById('submitBtn').textContent = "Add Week";
    document.getElementById('workForm').reset();
    renderTable();
  }

  // … your existing renderTable(), editWeek(), deleteWeek(), etc. …

  // make sure we still call this on load
  renderTable();
</script>
